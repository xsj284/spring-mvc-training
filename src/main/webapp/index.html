<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <script src="js/bootstrap.bundle.js"></script>
    <link rel="stylesheet" href="css/bootstrap.css">

    <script src="js/jquery.js"></script>

    <link rel="stylesheet" href="css/index.css">

    <script src="js/index.js"></script>

    <script>
        let pageData = {
            loginCode: null,
            username: null
        };
        $(document).ready(() => {
            $.ajax({
                url: 'isLoginSuccess',
                dataType: 'json',
                type: 'get',
                async: false,
                success: (data) => {
                    pageData = data

                }
            })
            const noLogin = $("#noLogin")
            const loginSuccess = $("#loginSuccess")
            const loginSuccessText = $("#loginSuccess span")
            if (pageData.loginCode === 1) {
                noLogin.css("display", "none")
                loginSuccess.css("display", "block")
                loginSuccessText.html(pageData.username + ",欢迎回来! | " +
                    "<span class='el-hover' onclick=\"loginOut()\">退出登录</span>")
            }
        })

        function loginOut() {
            $.ajax({
                url: 'loginOut',
                type: 'get',
                async: false,
                success: () => {
                    gotoPage('index.html')
                }
            })
        }

        function gotoPage(url) {
            window.open(url, '_self')
        }

    </script>
</head>

<body>
<div class="container-fluid text-white bg-main">
    <h1 class="text-center pt-5 p-md-5">我的第一个 Bootstrap 页面</h1>
    <div class="row index-header">
        <div class="col-4">
            <div class="row">
                <div class="col"><span class="el-hover" onclick="gotoPage('/')">首页</span></div>
                <div class="col">建设中..</div>
                <div class="col">建设中..</div>
            </div>
        </div>
        <div class="col text-align-right">
            <div id="noLogin">
                <span class="btn-login el-hover" onclick="gotoPage('pages/account/login.html')">Login</span>
                <span> | </span>
                <span class="btn-register el-hover" onclick="gotoPage('pages/account/register.html')">Register</span>
            </div>
            <div id="loginSuccess" style="display: none">
                <span></span>
            </div>
        </div>
    </div>
</div>
</body>

</html>
